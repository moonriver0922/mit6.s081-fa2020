***1.sleep***
***2.pingpong***
***3.primes***
构思的时间其实不多，因为一个低级错误，浪费了许多时间在找调试器上
**for(int cur = pre, pre = 0; cur > 0; cur--) {};**
这一句里的两个pre是不一样的，没有编译器的帮忙，就会犯这种不易察觉的错误
---改进---
参考了北大飞猪哥和哆啦A梦哥的实现后意识到我的方案没有实现并行，始终只有一个进程在工作，因为read的特性，它等待write完成或者所有相应的fd回收后才进行，所以不用考虑先后顺序的问题
可以让父进程和子进程分别做write和read
***4.find***
看文档的时间比写代码的时间要多，对于*ls*函数需要理解地比较透彻再去写，主要就是三部分
主函数、格式转换函数、查找函数
主函数不必多说，格式转换函数*fmtname*是用来得到路径下的文件名，也就是路径最后一个/后的内容，查找函数*find*则是需要先对路径进行判断，如果是文件，则直接比较与file是否相同，如果是目录，则使用read去阅读dirent目录项，继续判断如果是文件，则直接比较，如果是目录则递归查找
出现问题的地方是在if (strcmp(fmtname(buf), ".") && strcmp(fmtname(buf), ".."))的判断条件，多了一个！导致错误
***5.xargs***
xargs，这部分花了不少时间理解管道在命令行里的作用，然后去库里找了找发现是有一个`gets`函数可以用的，就偷懒没再自己写，前期的问题集中在对于`argv`的理解不够深入，命令行参数到底是如何作用的？以及`exec`对于`file`和`argv`的读取都花了不少时间查找资料，细节方面就是注意**换行符**的处理。

顺利通过测试点以后看了下飞猪哥写的，发现他是自己实现了gets函数，以及一些增加的内容。

同时我想到了先前调试时遇到的一个问题，一开始我是用`echo zju | xargs echo hi`命令进行测试，发现是不对的，得到的结果是 `$ zju`没有显示出`hi`，而是成了一个空格，也就是说`hi`变成了`“”`，百思不得其解，中间只有一条语句，是`argv[argc + 1] = 0;`，为什么会影响到前面的参数呢？

我继续尝试了这条命令`echo zju | xargs echo ni hao`，发现输出的结果是正常的！`$ni hao zju`，我陷入了思考，尝试打印argv地址，没有看出什么端倪。

后来索性摆烂似的增加参数

`echo zju | xargs echo pku`

`echo zju | xargs echo pku tsu`

`echo zju | xargs echo pku tsu ustc`

`echo zju | xargs echo pku tsu ustc ucb`

我发现输出似乎呈现出了奇不变偶变的规律

` $ zju`

`$pku tsu zju`

`$pku tsu  zju`

`$pku tsu ustc ucb zju`

于是我进一步增加了地址的种类，不止argv，包括*argv，以奇数偶数交替的方式写了上述脚本，运行结果如下

```
$ sh < targettest.sh
$ 12208 xargs 12272 x
12216 echo 12256 e
12224 a 12240 a
12232 (null) 0 q

**************

12208 xargs 12272 x
12216 echo 12256 e
12224 a 12240 a
12232 z 12064 z

*************

12208 xargs 12272 x
12216 echo 12256 e
12224  12240
12232 z 12064 z
12240 (null) 0 q
 z
$ 12176 xargs 12272 x
12184 echo 12256 e
12192 a 12240 a
12200 b 12224 b
12208 (null) 0 q

**************

12176 xargs 12272 x
12184 echo 12256 e
12192 a 12240 a
12200 b 12224 b
12208 z 12032 z

*************

12176 xargs 12272 x
12184 echo 12256 e
12192 a 12240 a
12200 b 12224 b
12208 z 12032 z
12216 (null) 0 q
a b z
$ 12160 xargs 12272 x
12168 echo 12256 e
12176 a 12240 a
12184 b 12224 b
12192 c 12208 c
12200 (null) 0 q

**************

12160 xargs 12272 x
12168 echo 12256 e
12176 a 12240 a
12184 b 12224 b
12192 c 12208 c
12200 z 12016 z

*************

12160 xargs 12272 x
12168 echo 12256 e
12176 a 12240 a
12184 b 12224 b
12192  12208
12200 z 12016 z
12208 (null) 0 q
a b  z
$ 12128 xargs 12272 x
12136 echo 12256 e
12144 a 12240 a
12152 b 12224 b
12160 c 12208 c
12168 d 12192 d
12176 (null) 0 q

**************

12128 xargs 12272 x
12136 echo 12256 e
12144 a 12240 a
12152 b 12224 b
12160 c 12208 c
12168 d 12192 d
12176 z 11984 z

*************

12128 xargs 12272 x
12136 echo 12256 e
12144 a 12240 a
12152 b 12224 b
12160 c 12208 c
12168 d 12192 d
12176 z 11984 z
12184 (null) 0 q
a b c d z
$ 12112 xargs 12272 x
12120 echo 12256 e
12128 a 12240 a
12136 b 12224 b
12144 c 12208 c
12152 d 12192 d
12160 e 12176 e
12168 (null) 0 q

**************

12112 xargs 12272 x
12120 echo 12256 e
12128 a 12240 a
12136 b 12224 b
12144 c 12208 c
12152 d 12192 d
12160 e 12176 e
12168 z 11968 z

*************

12112 xargs 12272 x
12120 echo 12256 e
12128 a 12240 a
12136 b 12224 b
12144 c 12208 c
12152 d 12192 d
12160  12176
12168 z 11968 z
12176 (null) 0 q
a b c d  z
$ 12080 xargs 12272 x
12088 echo 12256 e
12096 a 12240 a
12104 b 12224 b
12112 c 12208 c
12120 d 12192 d
12128 e 12176 e
12136 f 12160 f
12144 (null) 0 q

**************

12080 xargs 12272 x
12088 echo 12256 e
12096 a 12240 a
12104 b 12224 b
12112 c 12208 c
12120 d 12192 d
12128 e 12176 e
12136 f 12160 f
12144 z 11936 z

*************

12080 xargs 12272 x
12088 echo 12256 e
12096 a 12240 a
12104 b 12224 b
12112 c 12208 c
12120 d 12192 d
12128 e 12176 e
12136 f 12160 f
12144 z 11936 z
12152 (null) 0 q
a b c d e f z
$ 12064 xargs 12272 x
12072 echo 12256 e
12080 a 12240 a
12088 b 12224 b
12096 c 12208 c
12104 d 12192 d
12112 e 12176 e
12120 f 12160 f
12128 g 12144 g
12136 (null) 0 q

**************

12064 xargs 12272 x
12072 echo 12256 e
12080 a 12240 a
12088 b 12224 b
12096 c 12208 c
12104 d 12192 d
12112 e 12176 e
12120 f 12160 f
12128 g 12144 g
12136 z 11920 z

*************

12064 xargs 12272 x
12072 echo 12256 e
12080 a 12240 a
12088 b 12224 b
12096 c 12208 c
12104 d 12192 d
12112 e 12176 e
12120 f 12160 f
12128  12144
12136 z 11920 z
12144 (null) 0 q
a b c d e f  z
$ $ QEMU: Terminated
```

这么一来答案便呼之欲出了，`argv`数组的长度不是事先给定的，而是随时增长的，就会导致指针的错乱，我们`argv`数组以`NULL`结束时的地址恰好是前面某个参数的存放地址，而恰恰在偶数个参数时出现问题，也就有了上面的现象。所以需要重新创建一个指定最大长度的数组来存放参数。

